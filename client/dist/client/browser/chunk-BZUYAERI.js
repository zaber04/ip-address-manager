import{b as q,c as R}from"./chunk-CZEYUQQ4.js";import{a as D,b as A,c as x,d as B,e as G,f as P,g as U,h as H,i as Y,j as z,k as J,l as O,m as W,n as y}from"./chunk-3K4UZSKX.js";import{a as $}from"./chunk-4YL2JKF4.js";import{b as V}from"./chunk-MUKAY4P3.js";import{$ as h,G as i,Ga as F,H as v,Ha as N,Ia as j,M as a,O as g,P as m,Q as s,R as f,S as _,T as C,W as E,X as c,Y as I,_ as l,aa as b,d as Z,m as S,pa as T,r as w,ra as M,u as k,v as L}from"./chunk-VTQJTHAG.js";var K=Z($());function te(t,r){if(t&1&&(_(0),m(1,"div",24),l(2),s(),C()),t&2){let o=c();i(2),h(o.errors.message)}}function re(t,r){if(t&1&&f(0,"app-form-error",25),t&2){let o=c(2);I("message",o.pageContent.emailInvalidMessage)}}function ie(t,r){if(t&1&&(_(0),g(1,re,1,1,"app-form-error",10),C()),t&2){let o=c();i(1),a("ngIf",o.form.hasError)}}function ne(t,r){if(t&1&&f(0,"app-form-error",25),t&2){let o=c();a("message",o.errors.messages)}}function oe(t,r){if(t&1&&f(0,"app-form-error",25),t&2){let o=c(2);I("message",o.pageContent.emailInvalidMessage)}}function ae(t,r){if(t&1&&(_(0),g(1,oe,1,1,"app-form-error",10),C()),t&2){let o=c();i(1),a("ngIf",o.form.hasError)}}function me(t,r){if(t&1&&f(0,"app-form-error",25),t&2){let o=c();a("message",o.errors.messages)}}function se(t,r){t&1&&f(0,"i",26)}var Q=(()=>{let r=class r{constructor(d,n,e){this.fb=d,this.authService=n,this.router=e,this.subscribed=new V,this.triedSubmission=!1,this.hasError=!1,this.errors={message:"We have error"},this.pageContent={pageTitle:"IP Address Manager",signInTitle:"Sign in",emailLabel:"Your email",passwordLabel:"Your password",emailInvalidMessage:"Invalid Email",passwordRequiredMessage:"Password is required.",rememberMeLabel:"Remember me",forgotPasswordLink:"Forgot password?",signInButtonText:"Sign in",signUpMessage:"Don't have an account yet?",signUpLink:"Sign up"},this.form=this.fb.group({email:["",[x.required,x.email,x.maxLength(255)]],password:["",[x.required,x.minLength(8),x.maxLength(255)]],remember:[!1]}),this.authService.getToken()!==null&&this.authService.redirectToHome(e)}processFormSubmit(){this.hasError=!1,this.triedSubmission=!0,this.form.valid&&(this.subscribed.sink=this.authService.login(this.form.value).pipe(S(()=>this.triedSubmission=!1)).subscribe({next:d=>{let n=d.user,e=d.accessToken||"",p=new q().decodeToken(e)??{},u=p?.sub??"",X={first_name:n?.first_name||"",last_name:n?.last_name||"",email:n?.email||this.form.get("email")?.value||(p?.user?.email??""),email_verified_at:n?.email_verified_at,id:n?.id||u};this.authService.authenticate(X,e),K.default.fire({title:"Login successful",text:"Login successful.",icon:"success",showConfirmButton:!1,timer:2e3}),this.form.get("remember")?.value&&localStorage.setItem("remember","true"),this.form.reset(),setTimeout(()=>{this.authService.redirectToHome(this.router)},1e3)},error:({error:d})=>{this.hasError=!0,this.errors=d?.errors}}))}ngOnDestroy(){this.subscribed.unsubscribe()}};r.\u0275fac=function(n){return new(n||r)(v(O),v(R),v(F))},r.\u0275cmp=k({type:r,selectors:[["app-login"]],decls:38,vars:17,consts:[[1,"bg-gradient-to-r","from-purple-500","via-blue-500","to-green-500","h-screen"],[1,"flex","flex-col","items-center","justify-center","px-6","py-8","mx-auto","md:h-screen","lg:py-0"],["href","#",1,"flex","items-center","mb-6","text-2xl","font-semibold","text-white"],[1,"w-full","bg-white","rounded-lg","shadow","dark:border","md:mt-0","sm:max-w-md","xl:p-0","dark:bg-gray-800","dark:border-gray-700"],[1,"p-6","space-y-4","md:space-y-6","sm:p-8"],[1,"text-xl","font-bold","leading-tight","tracking-tight","text-gray-900","md:text-2xl","dark:text-white"],[4,"ngIf"],[1,"space-y-4","md:space-y-6",3,"formGroup","submit"],["for","email",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["type","email","formControlName","email","id","email","placeholder","name@company.com","required","","autocomplete","off",1,"input-field"],[3,"message",4,"ngIf"],["for","password",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["type","password","formControlName","password","id","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022","required","","autocomplete","off","minlength","8","maxlength","255",1,"input-field"],[1,"flex","items-center","justify-between"],[1,"flex","items-start"],[1,"flex","items-center","h-5"],["id","remember","formControlName","remember","aria-describedby","remember","type","checkbox",1,"checkbox-field"],[1,"ml-3","text-sm"],["for","remember",1,"text-gray-500","dark:text-gray-300"],["routerLink","/forgot-password",1,"text-sm","font-medium","text-purple-600","hover:underline","dark:text-purple-500"],["type","submit",1,"submit-button",3,"disabled"],["class","fa fa-circle-o-notch fa-spin",4,"ngIf"],[1,"text-sm","font-light","text-gray-500","dark:text-gray-400"],["routerLink","/register",1,"font-medium","text-purple-600","hover:underline","dark:text-purple-500"],[1,"px-4","py-3","mb-4","text-sm","text-red-800","rounded-lg","bg-red-50","dark:bg-gray-800","dark:text-red-400"],[3,"message"],[1,"fa","fa-circle-o-notch","fa-spin"]],template:function(n,e){if(n&1&&(m(0,"section",0)(1,"div",1)(2,"a",2),l(3),s(),m(4,"div",3)(5,"div",4)(6,"h1",5),l(7),s(),g(8,te,3,1,"ng-container",6),m(9,"form",7),E("submit",function(){return e.processFormSubmit()}),m(10,"div")(11,"label",8),l(12),s(),f(13,"input",9),g(14,ie,2,1,"ng-container",6)(15,ne,1,1,"app-form-error",10),s(),m(16,"div")(17,"label",11),l(18),s(),f(19,"input",12),g(20,ae,2,1,"ng-container",6)(21,me,1,1,"app-form-error",10),s(),m(22,"div",13)(23,"div",14)(24,"div",15),f(25,"input",16),s(),m(26,"div",17)(27,"label",18),l(28),s()()(),m(29,"a",19),l(30),s()(),m(31,"button",20),l(32),g(33,se,1,0,"i",21),s(),m(34,"p",22),l(35),m(36,"a",23),l(37),s()()()()()()()),n&2){let p,u;i(3),b(" ",e.pageContent.pageTitle," "),i(4),b(" ",e.pageContent.signInTitle," "),i(1),a("ngIf",e.errors!==null),i(1),a("formGroup",e.form),i(3),h(e.pageContent.emailLabel),i(2),a("ngIf",((p=e.form.get("email"))==null?null:p.errors)&&(((p=e.form.get("email"))==null?null:p.touched)||((p=e.form.get("email"))==null?null:p.dirty))),i(1),a("ngIf",e.errors&&e.errors.messages),i(3),h(e.pageContent.passwordLabel),i(2),a("ngIf",((u=e.form.get("password"))==null?null:u.errors)&&(((u=e.form.get("password"))==null?null:u.touched)||((u=e.form.get("password"))==null?null:u.dirty))),i(1),a("ngIf",e.errors&&e.errors.messages),i(7),h(e.pageContent.rememberMeLabel),i(2),h(e.pageContent.forgotPasswordLink),i(1),a("disabled",e.form.invalid||e.triedSubmission),i(1),b(" ",e.pageContent.signInButtonText," "),i(1),a("ngIf",e.triedSubmission),i(2),b("",e.pageContent.signUpMessage," "),i(2),h(e.pageContent.signUpLink)}},dependencies:[T,N,P,A,D,B,G,Y,z,J,U,H,y]});let t=r;return t})();var Se=(()=>{let r=class r{};r.\u0275fac=function(n){return new(n||r)},r.\u0275mod=L({type:r}),r.\u0275inj=w({imports:[M,j.forChild([{path:"",component:Q,title:"Ip Address Manager - Login"}]),W,y]});let t=r;return t})();export{Se as LoginModule};
