import './polyfills.server.mjs';
import{a as oe,d as ne}from"./chunk-DQ5D3PB5.mjs";import{a as P,b as ce,c as C}from"./chunk-UAN5GN32.mjs";import{a as me}from"./chunk-ON4X33R7.mjs";import{b as de}from"./chunk-TOYUHSAU.mjs";import{$a as re,Ga as Q,Ia as X,Ka as w,N as s,O as c,Pa as Y,Ra as Z,T as I,Ta as _,U as E,Ua as ee,V as J,Va as te,W as n,X as a,Y as l,Z as q,_ as V,_a as ie,ab as ae,ba as A,bb as se,c as U,ca as W,db as le,ea as $,f as D,fa as d,fb as p,ga as x,gb as pe,ha as G,hb as F,i as B,k as z,ka as y,n as h,o as g,pa as K,q as v,s as b,t as S}from"./chunk-OPECEUMY.mjs";import{g as L}from"./chunk-KRLCULJA.mjs";var O=(()=>{let e=class e{constructor(r,i){this.authService=r,this.router=i}canActivate(){return this.authService.isLoggedIn()?!0:(this.authService.clearStorage(),this.router.navigate(["login"]),!1)}};e.\u0275fac=function(i){return new(i||e)(v(C),v(p))},e.\u0275prov=h({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Ie=[{path:"",loadChildren:()=>import("./chunk-EBJ4A6AT.mjs").then(t=>t.AuditTrailsModule),canActivate:[O]},{path:"ip-handler",loadChildren:()=>import("./chunk-KQVUSCRV.mjs").then(t=>t.IpHandlerModule),canActivate:[O]},{path:"login",loadChildren:()=>import("./chunk-ITMX6GMZ.mjs").then(t=>t.LoginModule)},{path:"register",loadChildren:()=>import("./chunk-MYXB6QNR.mjs").then(t=>t.RegisterModule)},{path:"forgot-password",loadChildren:()=>import("./chunk-5HEQVOTH.mjs").then(t=>t.ForgotPasswordModule)},{path:"**",redirectTo:"",pathMatch:"full"}],fe=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=S({type:e}),e.\u0275inj=g({imports:[F.forRoot(Ie),F]});let t=e;return t})();var M=(()=>{let e=class e{constructor(){this.sidebarSubject=new U(!1),this.sidebarCollapseStatus=this.sidebarSubject.asObservable(),this.sidebarCollapsed=!1}toggleSidebar(){this.sidebarCollapsed=!this.sidebarCollapsed,this.sidebarSubject.next(this.sidebarCollapsed)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=h({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var N=L(me());var k=(()=>{let e=class e{constructor(r,i,o){this.router=r,this.authService=i,this.uiService=o,this.uiTexts={sidebarIcon:"ion-navicon",greeting:"Hello, ",logout:"Log Out"},this.user=this.authService.getUser()}logout(){N.default.fire({title:"Log Out",text:"Thanks for visiting us",imageUrl:"assets/images/icon/loading-buffering.gif",showConfirmButton:!1,allowOutsideClick:!1}),this.authService.logout().subscribe(r=>{r.success&&(this.authService.clearStorage(),N.default.close(),this.router.navigate(["login"]))})}toggleSidebar(){this.uiService.toggleSidebar()}};e.\u0275fac=function(i){return new(i||e)(c(p),c(C),c(M))},e.\u0275cmp=b({type:e,selectors:[["app-header"]],standalone:!0,features:[y],decls:25,vars:1,consts:[[1,"page-header","ip-header"],[1,"navbar","navbar-default","ip-header"],[1,"navbar-header"],[1,"navbar-brand"],[1,"list-inline"],[1,"list-inline-item","hover:text-black"],["type","button",3,"click"],[1,"ion-navicon","tx-20"],[1,"header-right","pull-right"],[1,"list-inline","justify-content-end"],[1,"list-inline-item","dropdown","min-w-[100px]"],["href","javascript:void(0)","role","button","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"text-muted"],[1,"select-profile","mr-2"],[1,"dropdown-menu","profile-dropdown","shadow-2"],["href","javascript:void(0)"],[1,"fa","fa-cog"],[3,"click"],[1,"fa","fa-sign-out"]],template:function(i,o){i&1&&(n(0,"div",0)(1,"nav",1)(2,"div",2)(3,"div",3)(4,"ul",4)(5,"li",5)(6,"button",6),A("click",function(){return o.toggleSidebar()}),l(7,"i",7),a()()()()(),n(8,"div",8)(9,"ul",9)(10,"li",10)(11,"a",11)(12,"span",12),d(13),a()(),n(14,"ul",13)(15,"li")(16,"a",14),l(17,"i",15),n(18,"span"),d(19,"Settings"),a()()(),n(20,"li")(21,"button",16),A("click",function(){return o.logout()}),l(22,"i",17),n(23,"span"),d(24,"Sign Out"),a()()()()()()()()()),i&2&&(s(13),G("Hello, ",o.user==null?null:o.user.first_name,"!"))},dependencies:[w],styles:[".swal2-image{width:140px;margin-bottom:-50px}.ip-header[_ngcontent-%COMP%]{background-color:#7c4dff!important}"]});let t=e;return t})();var R=(()=>{let e=class e{constructor(r){this.router=r,this.collapse=!1,this.sidebar={title:"IP Address Manager",menuItems:[{path:"/",label:"Audit Trail"},{path:"/ip-handler",label:"IP Address"}]},this.thisPath="/",this.subscribed=new de,r.events.subscribe(i=>{i instanceof se&&(this.thisPath=i.url.split("?")[0])})}ngOnDestroy(){this.subscribed.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)(c(p))},e.\u0275cmp=b({type:e,selectors:[["app-sidebar"]],inputs:{collapse:"collapse"},standalone:!0,features:[y],decls:15,vars:7,consts:[[1,"page-sidebar","ip-sidebar"],["routerLink","/",1,"logo-box","ip-logo-box"],[1,"page-sidebar-inner"],[1,"page-sidebar-menu"],[1,"accordion-menu"],["routerLink","/"],["routerLink","/ip-handler"]],template:function(i,o){i&1&&(n(0,"div",0)(1,"a",1)(2,"span"),d(3),a()(),n(4,"div",2)(5,"div",3)(6,"ul",4)(7,"li")(8,"a",5)(9,"span"),d(10),a()()(),n(11,"li")(12,"a",6)(13,"span"),d(14),a()()()()()()()),i&2&&(s(3),x(o.sidebar.title),s(4),E("active",o.thisPath==="/"),s(3),x(o.sidebar.menuItems[0].label),s(1),E("active",o.thisPath.indexOf("/ip-handler")>-1),s(3),x(o.sidebar.menuItems[1].label))},dependencies:[w,pe],styles:[".ip-sidebar[_ngcontent-%COMP%]{background-color:#7c4dff!important}"]});let t=e;return t})();function we(t,e){if(t&1&&(q(0),n(1,"div",2),l(2,"app-sidebar",3),n(3,"div",4),l(4,"app-header"),n(5,"div",5)(6,"div",6),l(7,"router-outlet"),a()(),n(8,"footer",7)(9,"div",8),l(10,"span",9),a()()()(),V()),t&2){let H=W();s(2),I("collapse",H.sidebar),s(1),I("ngClass",H.sidebar?"page-content-full":"page-content")}}function je(t,e){t&1&&l(0,"router-outlet")}var T=(()=>{let e=class e{constructor(r,i){this.router=r,this.uiService=i,this.title="client",this.loginUI=!1,this.sidebar=!1,this.router.events.subscribe(o=>{o instanceof ae&&(this.loginUI=!1,o.url==="/login"&&(this.loginUI=!0))}),this.uiService.sidebarCollapseStatus.subscribe(o=>this.sidebar=o)}ngOnInit(){}};e.\u0275fac=function(i){return new(i||e)(c(p),c(M))},e.\u0275cmp=b({type:e,selectors:[["app-root"]],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["loginForm",""],[1,"page-container"],[3,"collapse"],[3,"ngClass"],[1,"page-inner"],["id","main-wrapper"],[1,"page-footer","bg-gray-100"],[1,"pd-y-10","pd-x-25"],[1,"tx-italic","text-muted"]],template:function(i,o){if(i&1&&J(0,we,11,2,"ng-container",0)(1,je,1,0,"ng-template",null,1,K),i&2){let u=$(2);I("ngIf",!o.loginUI)("ngIfElse",u)}},dependencies:[Q,X,le,k,R],styles:[".page-sidebar[_ngcontent-%COMP%]{min-height:calc(100vh - 10px)}"]});let t=e;return t})();var ge=["/api/v1/auth/login"];var ve=L(me());var be=(()=>{let e=class e{constructor(r,i){this.router=r,this.authService=i}intercept(r,i){let o=this.authService.getToken(),u={"Content-Type":"application/json; charset=utf-8",Accept:"application/json"};ge.includes(r.url)||(u.Authorization=`Bearer ${o}`);let Ce=r.clone({setHeaders:u});return i.handle(Ce).pipe(z(f=>{f instanceof Y&&f.status===401&&this.handleUnauthorizedResponse()}),B(f=>(f.status===401?this.handleUnauthorizedResponse():f.status===404&&this.handleNotFoundResponse(),D(f))))}handleUnauthorizedResponse(){this.authService.logout().subscribe(r=>{r.success&&this.authService.clearStorage()}),ve.default.fire({title:"Login Required",text:"Authorization Error. Please login.",icon:"error",confirmButtonText:"Login",allowOutsideClick:!1}).then(()=>{this.router.navigate(["login"])})}handleNotFoundResponse(){console.log("Page Not Found!")}};e.\u0275fac=function(i){return new(i||e)(v(p),v(C))},e.\u0275prov=h({token:e,factory:e.\u0275fac});let t=e;return t})();var Se=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=S({type:e,bootstrap:[T]}),e.\u0275inj=g({providers:[_(ee()),re(),{provide:Z,useClass:be,multi:!0},{provide:P,useValue:P},ce],imports:[ie,fe,oe,te,k,R]});let t=e;return t})();var Me=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=S({type:e,bootstrap:[T]}),e.\u0275inj=g({imports:[Se,ne]});let t=e;return t})();export{Me as a};
